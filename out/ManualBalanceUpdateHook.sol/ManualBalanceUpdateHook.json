{"abi":[{"type":"constructor","inputs":[{"name":"_owner","type":"address","internalType":"address"}],"stateMutability":"nonpayable"},{"type":"function","name":"afterBalanceUpdate","inputs":[{"name":"","type":"uint256","internalType":"uint256"},{"name":"","type":"uint256","internalType":"uint256"},{"name":"","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"view"},{"type":"function","name":"authority","inputs":[],"outputs":[{"name":"","type":"address","internalType":"contract Authority"}],"stateMutability":"view"},{"type":"function","name":"beforeBalanceUpdate","inputs":[{"name":"currentPPS","type":"uint256","internalType":"uint256"},{"name":"totalSupply","type":"uint256","internalType":"uint256"},{"name":"idleAssets","type":"uint256","internalType":"uint256"},{"name":"newAggregatedBalance","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"shouldContinue","type":"bool","internalType":"bool"},{"name":"newPPS","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"maxPercentageChange","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"setAuthority","inputs":[{"name":"newAuthority","type":"address","internalType":"contract Authority"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"transferOwnership","inputs":[{"name":"newOwner","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"updateMaxPercentageChange","inputs":[{"name":"newThreshold","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"event","name":"AuthorityUpdated","inputs":[{"name":"user","type":"address","indexed":true,"internalType":"address"},{"name":"newAuthority","type":"address","indexed":true,"internalType":"contract Authority"}],"anonymous":false},{"type":"event","name":"MaxPercentageUpdated","inputs":[{"name":"oldMax","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"newMax","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"OwnershipTransferred","inputs":[{"name":"user","type":"address","indexed":true,"internalType":"address"},{"name":"newOwner","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"error","name":"InvalidMaxPercentage","inputs":[]}],"bytecode":{"object":"0x60803460d157601f61073238819003918201601f19168301916001600160401b0383118484101760d55780849260209460405283398101031260d157516001600160a01b0381169081900360d1575f80546001600160a01b031990811683178255600180549091169055604051919033907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09080a35f337fa3396fd7f6e0a21b50e5089d2da70d5ac0a3bbbd1f617a93f134b763899801988280a3662386f26fc1000060025561064890816100ea8239f35b5f80fd5b634e487b7160e01b5f52604160045260245ffdfe60806040526004361015610011575f80fd5b5f358060e01c9081631faab2231461032f5781637a9e5e4b146102135781638da5cb5b146101ee57816395c5eaf514610154578163bf7e214f1461012e578163cfa40aed14610111578163f2fde38b1461008b575063fcbde38914610074575f80fd5b3461008757606036600319011261008757005b5f80fd5b3461008757602036600319011261008757600435906001600160a01b038216809203610087576100c86001600160e01b03196100cd9216336104d8565b610411565b8073ffffffffffffffffffffffffffffffffffffffff195f5416175f55337f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e05f80a3005b34610087575f366003190112610087576020600254604051908152f35b34610087575f3660031901126100875760206001600160a01b0360015416604051908152f35b346100875760203660031901126100875761017f6100c86001600160e01b03196004359316336104d8565b67016345785d8a00008110156101c6577f5b1f8430a1675242d4a0bdb976ee1c8740d114671db54660aba42fb46293e5dd60406002548151908152836020820152a1600255005b7f5aede91d000000000000000000000000000000000000000000000000000000005f5260045ffd5b34610087575f3660031901126100875760206001600160a01b035f5416604051908152f35b3461008757602036600319011261008757600435906001600160a01b038216809203610087576001600160a01b035f5416331490811561029a575b5015610087578073ffffffffffffffffffffffffffffffffffffffff196001541617600155337fa3396fd7f6e0a21b50e5089d2da70d5ac0a3bbbd1f617a93f134b763899801985f80a3005b60015460405163b700961360e01b81523360048201523060248201526001600160e01b0319929092166044830152909150602090829060649082906001600160a01b03165afa908115610324575f916102f5575b508261024e565b610317915060203d60201161031d575b61030f81836103c3565b8101906103f9565b826102ee565b503d610305565b6040513d5f823e3d90fd5b34610087576080366003190112610087576024356103516064356044356103b6565b90806103765750506040670de0b6b3a76400006001905b825191151582526020820152f35b670de0b6b3a764000061038892610589565b60409061039781600435610483565b600254101590610368565b634e487b7160e01b5f52601160045260245ffd5b919082018092116103a257565b90601f8019910116810190811067ffffffffffffffff8211176103e557604052565b634e487b7160e01b5f52604160045260245ffd5b90816020910312610087575180151581036100875790565b1561041857565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600c60248201527f554e415554484f52495a454400000000000000000000000000000000000000006044820152fd5b919082039182116103a257565b80156104d2576104bf9181808211156104c25761049f91610476565b905b670de0b6b3a76400006104b5828285610589565b92091515906103b6565b90565b906104cc91610476565b906104a1565b50505f90565b6001600160a01b036001541691821515928361050f575b505081156104fb575090565b90506001600160a01b03805f541691161490565b60405163b700961360e01b81526001600160a01b03841660048201523060248201526001600160e01b031992909216604483015291925090602090829060649082905afa908115610324575f9161056a575b50905f806104ef565b610583915060203d60201161031d5761030f81836103c3565b5f610561565b91818302915f198185099383808610950394808603951461061957848311156106015790829109815f0382168092046002816003021880820260020302808202600203028082026002030280820260020302808202600203028091026002030293600183805f03040190848311900302920304170290565b82634e487b715f52156003026011186020526024601cfd5b505080925015610627570490565b634e487b7160e01b5f52601260045260245ffdfea164736f6c634300081c000a","sourceMap":"488:2314:80:-:0;;;;;;;;;;;;;-1:-1:-1;;488:2314:80;;;;-1:-1:-1;;;;;488:2314:80;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;488:2314:80;;;;;;;;-1:-1:-1;488:2314:80;;-1:-1:-1;;;;;;488:2314:80;;;;;;;;;;;;;;;;;;;765:10:71;;744:40;;-1:-1:-1;744:40:71;-1:-1:-1;765:10:71;799:40;;;;888:4:80;866:26;488:2314;;;;;;;;;-1:-1:-1;488:2314:80;;;;;;-1:-1:-1;488:2314:80;;;;;-1:-1:-1;488:2314:80","linkReferences":{}},"deployedBytecode":{"object":"0x60806040526004361015610011575f80fd5b5f358060e01c9081631faab2231461032f5781637a9e5e4b146102135781638da5cb5b146101ee57816395c5eaf514610154578163bf7e214f1461012e578163cfa40aed14610111578163f2fde38b1461008b575063fcbde38914610074575f80fd5b3461008757606036600319011261008757005b5f80fd5b3461008757602036600319011261008757600435906001600160a01b038216809203610087576100c86001600160e01b03196100cd9216336104d8565b610411565b8073ffffffffffffffffffffffffffffffffffffffff195f5416175f55337f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e05f80a3005b34610087575f366003190112610087576020600254604051908152f35b34610087575f3660031901126100875760206001600160a01b0360015416604051908152f35b346100875760203660031901126100875761017f6100c86001600160e01b03196004359316336104d8565b67016345785d8a00008110156101c6577f5b1f8430a1675242d4a0bdb976ee1c8740d114671db54660aba42fb46293e5dd60406002548151908152836020820152a1600255005b7f5aede91d000000000000000000000000000000000000000000000000000000005f5260045ffd5b34610087575f3660031901126100875760206001600160a01b035f5416604051908152f35b3461008757602036600319011261008757600435906001600160a01b038216809203610087576001600160a01b035f5416331490811561029a575b5015610087578073ffffffffffffffffffffffffffffffffffffffff196001541617600155337fa3396fd7f6e0a21b50e5089d2da70d5ac0a3bbbd1f617a93f134b763899801985f80a3005b60015460405163b700961360e01b81523360048201523060248201526001600160e01b0319929092166044830152909150602090829060649082906001600160a01b03165afa908115610324575f916102f5575b508261024e565b610317915060203d60201161031d575b61030f81836103c3565b8101906103f9565b826102ee565b503d610305565b6040513d5f823e3d90fd5b34610087576080366003190112610087576024356103516064356044356103b6565b90806103765750506040670de0b6b3a76400006001905b825191151582526020820152f35b670de0b6b3a764000061038892610589565b60409061039781600435610483565b600254101590610368565b634e487b7160e01b5f52601160045260245ffd5b919082018092116103a257565b90601f8019910116810190811067ffffffffffffffff8211176103e557604052565b634e487b7160e01b5f52604160045260245ffd5b90816020910312610087575180151581036100875790565b1561041857565b60646040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152600c60248201527f554e415554484f52495a454400000000000000000000000000000000000000006044820152fd5b919082039182116103a257565b80156104d2576104bf9181808211156104c25761049f91610476565b905b670de0b6b3a76400006104b5828285610589565b92091515906103b6565b90565b906104cc91610476565b906104a1565b50505f90565b6001600160a01b036001541691821515928361050f575b505081156104fb575090565b90506001600160a01b03805f541691161490565b60405163b700961360e01b81526001600160a01b03841660048201523060248201526001600160e01b031992909216604483015291925090602090829060649082905afa908115610324575f9161056a575b50905f806104ef565b610583915060203d60201161031d5761030f81836103c3565b5f610561565b91818302915f198185099383808610950394808603951461061957848311156106015790829109815f0382168092046002816003021880820260020302808202600203028082026002030280820260020302808202600203028091026002030293600183805f03040190848311900302920304170290565b82634e487b715f52156003026011186020526024601cfd5b505080925015610627570490565b634e487b7160e01b5f52601260045260245ffdfea164736f6c634300081c000a","sourceMap":"488:2314:80:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;488:2314:80;;;;;;;;;;;;;;;-1:-1:-1;;488:2314:80;;;;;;;-1:-1:-1;;;;;488:2314:80;;;;;;;902:33:71;-1:-1:-1;;;;;;894:58:71;927:7;;915:10;902:33;:::i;:::-;894:58;:::i;:::-;488:2314:80;-1:-1:-1;;488:2314:80;;;;;;915:10:71;2078:42;488:2314:80;2078:42:71;;488:2314:80;;;;;;;-1:-1:-1;;488:2314:80;;;;;584:34;488:2314;;;;;;;;;;;;;-1:-1:-1;;488:2314:80;;;;;-1:-1:-1;;;;;589:26:71;488:2314:80;;;;;;;;;;;;;;-1:-1:-1;;488:2314:80;;;;894:58:71;902:33;-1:-1:-1;;;;;;488:2314:80;;927:7:71;;915:10;902:33;:::i;894:58::-;709:4:80;2236:39;;709:4;;;2322:55;488:2314;2343:19;655:4;488:2314;;;;;709:4;488:2314;709:4;;488:2314;2322:55;2343:19;709:4;488:2314;709:4;;488:2314;709:4;488:2314;;709:4;488:2314;;;;;;-1:-1:-1;;488:2314:80;;;;;-1:-1:-1;;;;;488:2314:80;;;;;;;;;;;;;;;-1:-1:-1;;488:2314:80;;;;;;;-1:-1:-1;;;;;488:2314:80;;;;;;;-1:-1:-1;;;;;488:2314:80;;;1780:10:71;:19;:76;;;;;488:2314:80;;;;;;-1:-1:-1;;1868:24:71;488:2314:80;;;1868:24:71;488:2314:80;1780:10:71;1908:42;488:2314:80;1908:42:71;;488:2314:80;1780:76:71;1803:9;488:2314:80;;;-1:-1:-1;;;1803:53:71;;1780:10;488:2314:80;1803:53:71;;488:2314:80;1841:4:71;488:2314:80;;;;-1:-1:-1;;;;;;1848:7:71;;;;488:2314:80;;;;;;-1:-1:-1;488:2314:80;;;;;;;;-1:-1:-1;;;;;488:2314:80;1803:53:71;;;;;;;488:2314:80;1803:53:71;;;1780:76;;;;;1803:53;;;;488:2314:80;1803:53:71;488:2314:80;1803:53:71;;;;;;;;:::i;:::-;;;;;:::i;:::-;;;;;;;;;;488:2314:80;;;;;;;;;;;;;;;-1:-1:-1;;488:2314:80;;;;;;1242:33;488:2314;;;;1242:33;:::i;:::-;1331:16;;;;1363:20;;488:2314;655:4;488:2314;1327:420;;488:2314;;;;;;;;;;;;1327:420;655:4;9478:25:50;1458:65:80;9478:25:50;:::i;:::-;488:2314:80;;1620:46;9471:111:50;488:2314:80;;1620:46;:::i;:::-;1717:19;655:4;-1:-1:-1;1697:39:80;1327:420;;;488:2314;-1:-1:-1;;;488:2314:80;;;;;;;;;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;:::o;:::-;-1:-1:-1;;;;488:2314:80;;;;;-1:-1:-1;488:2314:80;;;;;;;;;;;;;;;;;;;:::o;:::-;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;2494:306::-;2611:13;;2607:27;;9478:104:50;;2659:19:80;;;;;;;2681;;;:::i;:::-;2659:63;;655:4;9478:25:50;;;;;:::i;:::-;9522:26;9552:25;:29;;9478:104;;:::i;:::-;2494:306:80;:::o;2659:63::-;2703:19;;;;:::i;:::-;2659:63;;;2607:27;2626:8;;488:2314;2626:8;:::o;977:540:71:-;-1:-1:-1;;;;;1097:9:71;488:2314:80;;1415:27:71;;;;:77;;;;977:540;1414:96;;;;;;1407:103;977:540;:::o;1414:96::-;488:2314:80;;-1:-1:-1;;;;;488:2314:80;-1:-1:-1;488:2314:80;;;;1497:13:71;977:540;:::o;1415:77::-;488:2314:80;;-1:-1:-1;;;1446:46:71;;-1:-1:-1;;;;;488:2314:80;;1446:46:71;;;488:2314:80;1473:4:71;488:2314:80;;;;-1:-1:-1;;;;;;488:2314:80;;;;;;;;;;-1:-1:-1;488:2314:80;1446:46:71;;488:2314:80;;;;;;1446:46:71;;;;;;;-1:-1:-1;1446:46:71;;;1415:77;;;;;;;1446:46;;;;;;;;;;;;;;:::i;:::-;;;;4996:4226:50;;488:2314:80;;;;-1:-1:-1;;488:2314:80;4996:4226:50;5584:131;;;;;;;;;;;;5796:10;;5792:368;;6270:20;;;;6266:143;;6695:300;;;;940:4:47;488:2314:80;940:4:47;7214:31:50;;7259:375;;;8094:1;488:2314:80;8075:1:50;488:2314:80;8074:21:50;488:2314:80;;;8094:1:50;940:4:47;488:2314:80;;;;8094:1:50;940:4:47;488:2314:80;;;;8094:1:50;940:4:47;488:2314:80;;;;8094:1:50;940:4:47;488:2314:80;;;;8094:1:50;940:4:47;488:2314:80;;;;8094:1:50;940:4:47;488:2314:80;7259:375:50;;;;488:2314:80;7259:375:50;;;6695:300;;;;;;488:2314:80;6695:300:50;;7259:375;7700:21;488:2314:80;4996:4226:50;:::o;6266:143::-;1829:135:47;;488:2314:80;1829:135:47;6330:16:50;3066:5;488:2314:80;940:4:47;3060:42:50;1829:135:47;;;;;5792:368:50;488:2314:80;;;;;;;;;6119:26:50;:::o;488:2314:80:-;-1:-1:-1;;;488:2314:80;;;;;;;","linkReferences":{}},"methodIdentifiers":{"afterBalanceUpdate(uint256,uint256,uint256)":"fcbde389","authority()":"bf7e214f","beforeBalanceUpdate(uint256,uint256,uint256,uint256)":"1faab223","maxPercentageChange()":"cfa40aed","owner()":"8da5cb5b","setAuthority(address)":"7a9e5e4b","transferOwnership(address)":"f2fde38b","updateMaxPercentageChange(uint256)":"95c5eaf5"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.28+commit.7893614a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"InvalidMaxPercentage\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"contract Authority\",\"name\":\"newAuthority\",\"type\":\"address\"}],\"name\":\"AuthorityUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"oldMax\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newMax\",\"type\":\"uint256\"}],\"name\":\"MaxPercentageUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"afterBalanceUpdate\",\"outputs\":[],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"authority\",\"outputs\":[{\"internalType\":\"contract Authority\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"currentPPS\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalSupply\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"idleAssets\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"newAggregatedBalance\",\"type\":\"uint256\"}],\"name\":\"beforeBalanceUpdate\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"shouldContinue\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"newPPS\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"maxPercentageChange\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"contract Authority\",\"name\":\"newAuthority\",\"type\":\"address\"}],\"name\":\"setAuthority\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"newThreshold\",\"type\":\"uint256\"}],\"name\":\"updateMaxPercentageChange\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Pure calculation helper - does not modify vault state\",\"kind\":\"dev\",\"methods\":{\"afterBalanceUpdate(uint256,uint256,uint256)\":{\"params\":{\"newBalance\":\"New aggregated balance\",\"newPPS\":\"New price per share\",\"oldBalance\":\"Previous aggregated balance\"}},\"beforeBalanceUpdate(uint256,uint256,uint256,uint256)\":{\"params\":{\"currentPPS\":\"Current price per share\",\"idleAssets\":\"Idle assets in vault\",\"newAggregatedBalance\":\"New aggregated balance from strategies\",\"totalSupply\":\"Total vault shares\"},\"returns\":{\"newPPS\":\"Calculated new price per share\",\"shouldContinue\":\"If false, update should be rejected and vault paused\"}},\"updateMaxPercentageChange(uint256)\":{\"params\":{\"newThreshold\":\"New max percentage change (1e18 = 100%)\"}}},\"title\":\"ManualBalanceUpdateHook\",\"version\":1},\"userdoc\":{\"errors\":{\"InvalidMaxPercentage()\":[{\"notice\":\"Thrown when the new max percentage is greater than the current max percentage.\"}]},\"kind\":\"user\",\"methods\":{\"afterBalanceUpdate(uint256,uint256,uint256)\":{\"notice\":\"Called after balance update completes (for future extensibility)\"},\"beforeBalanceUpdate(uint256,uint256,uint256,uint256)\":{\"notice\":\"Called before balance update to validate and calculate new PPS\"},\"maxPercentageChange()\":{\"notice\":\"Get current max percentage change threshold\"},\"updateMaxPercentageChange(uint256)\":{\"notice\":\"Update the maximum price change threshold\"}},\"notice\":\"Hook that validates balance updates based on price change thresholds\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/hooks/ManualBalanceUpdateHook.sol\":\"ManualBalanceUpdateHook\"},\"evmVersion\":\"shanghai\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"none\"},\"optimizer\":{\"enabled\":true,\"runs\":1000},\"remappings\":[\":@layerzerolabs/lz-evm-protocol-v2/=lib/LayerZero-v2/packages/layerzero-v2/evm/protocol/\",\":@layerzerolabs/oapp-evm-upgradeable/=lib/devtools/packages/oapp-evm-upgradeable/\",\":@layerzerolabs/oapp-evm/=lib/LayerZero-v2/packages/layerzero-v2/evm/oapp/\",\":@openzeppelin/contracts-upgradeable/=node_modules/@openzeppelin/contracts-upgradeable/\",\":@openzeppelin/contracts/=node_modules/@openzeppelin/contracts/\",\":@solmate/=node_modules/solmate/src/\",\":LayerZero-v2/=lib/LayerZero-v2/\",\":devtools/=lib/devtools/packages/toolbox-foundry/src/\",\":ds-test/=lib/LayerZero-v2/lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/\",\":forge-std/=node_modules/forge-std/src/\",\":halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":solmate/=node_modules/solmate/\"],\"viaIR\":true},\"sources\":{\"node_modules/@openzeppelin/contracts/utils/Panic.sol\":{\"keccak256\":\"0xf7fe324703a64fc51702311dc51562d5cb1497734f074e4f483bfb6717572d7a\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://c6a5ff4f9fd8649b7ee20800b7fa387d3465bd77cf20c2d1068cd5c98e1ed57a\",\"dweb:/ipfs/QmVSaVJf9FXFhdYEYeCEfjMVHrxDh5qL4CGkxdMWpQCrqG\"]},\"node_modules/@openzeppelin/contracts/utils/math/Math.sol\":{\"keccak256\":\"0xa00be322d7db5786750ce0ac7e2f5b633ac30a5ed5fa1ced1e74acfc19acecea\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://6c84e822f87cbdc4082533b626667b6928715bb2b1e8e7eb96954cebb9e38c8d\",\"dweb:/ipfs/QmZmy9dgxLTerBAQDuuHqbL6EpgRxddqgv5KmwpXYVbKz1\"]},\"node_modules/@openzeppelin/contracts/utils/math/SafeCast.sol\":{\"keccak256\":\"0x195533c86d0ef72bcc06456a4f66a9b941f38eb403739b00f21fd7c1abd1ae54\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://b1d578337048cad08c1c03041cca5978eff5428aa130c781b271ad9e5566e1f8\",\"dweb:/ipfs/QmPFKL2r9CBsMwmUqqdcFPfHZB2qcs9g1HDrPxzWSxomvy\"]},\"node_modules/solmate/src/auth/Auth.sol\":{\"keccak256\":\"0x6e05238d59cd40172c04c1974eb8f1f6cef4fdc4b6553ef7844a7302b885f76c\",\"license\":\"AGPL-3.0-only\",\"urls\":[\"bzz-raw://a9743c21ca0470d9082e4cf00aea53786868c977d40775e6954463658ebb50ac\",\"dweb:/ipfs/QmPFdyrLHUX1zSipTC2tcJ58EzxxPp2TTvCZx9KCgqZn2W\"]},\"src/hooks/ManualBalanceUpdateHook.sol\":{\"keccak256\":\"0x2754a8eaba4cfccc805e22b0ce6633aa8d07dcefacd2129cb1970c4fa8f2463b\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://bedfd3a20b1110053385967bc2141713a8b84f1f32973e5afc65a36134eb1488\",\"dweb:/ipfs/QmdYe3khHSJHVuikRaaBqExEsEzfY41rhTMTEMqYthpx1X\"]},\"src/interfaces/IBalanceUpdateHook.sol\":{\"keccak256\":\"0x86171480b2d7111d180f940e866f2b1ebfccbeb07bae09329d121d9c4815d52e\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://7e32aaf83d171193f5edf92f8e4c2c50de7b996e0b54dbdd909bedaea7761d4e\",\"dweb:/ipfs/QmaKy5DQJCd34avuCBQtJhx4Ez955dHC3Nr6PukqwXG7dG\"]},\"src/libraries/Errors.sol\":{\"keccak256\":\"0xae33ca9825182ac051757cb5a13c2ae47c0e24020a04c74989c316491d2dfe89\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://e1a964fc49f09f36861c0061d27aabf0489e2fd4a9282a3871d0b338a0b38731\",\"dweb:/ipfs/QmaKRqJBicUmZd5EyX46Bct75HJePYRVZ6eobmP9smSMkm\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.28+commit.7893614a"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"type":"error","name":"InvalidMaxPercentage"},{"inputs":[{"internalType":"address","name":"user","type":"address","indexed":true},{"internalType":"contract Authority","name":"newAuthority","type":"address","indexed":true}],"type":"event","name":"AuthorityUpdated","anonymous":false},{"inputs":[{"internalType":"uint256","name":"oldMax","type":"uint256","indexed":false},{"internalType":"uint256","name":"newMax","type":"uint256","indexed":false}],"type":"event","name":"MaxPercentageUpdated","anonymous":false},{"inputs":[{"internalType":"address","name":"user","type":"address","indexed":true},{"internalType":"address","name":"newOwner","type":"address","indexed":true}],"type":"event","name":"OwnershipTransferred","anonymous":false},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","name":"afterBalanceUpdate"},{"inputs":[],"stateMutability":"view","type":"function","name":"authority","outputs":[{"internalType":"contract Authority","name":"","type":"address"}]},{"inputs":[{"internalType":"uint256","name":"currentPPS","type":"uint256"},{"internalType":"uint256","name":"totalSupply","type":"uint256"},{"internalType":"uint256","name":"idleAssets","type":"uint256"},{"internalType":"uint256","name":"newAggregatedBalance","type":"uint256"}],"stateMutability":"view","type":"function","name":"beforeBalanceUpdate","outputs":[{"internalType":"bool","name":"shouldContinue","type":"bool"},{"internalType":"uint256","name":"newPPS","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"maxPercentageChange","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[{"internalType":"contract Authority","name":"newAuthority","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"setAuthority"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"transferOwnership"},{"inputs":[{"internalType":"uint256","name":"newThreshold","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"updateMaxPercentageChange"}],"devdoc":{"kind":"dev","methods":{"afterBalanceUpdate(uint256,uint256,uint256)":{"params":{"newBalance":"New aggregated balance","newPPS":"New price per share","oldBalance":"Previous aggregated balance"}},"beforeBalanceUpdate(uint256,uint256,uint256,uint256)":{"params":{"currentPPS":"Current price per share","idleAssets":"Idle assets in vault","newAggregatedBalance":"New aggregated balance from strategies","totalSupply":"Total vault shares"},"returns":{"newPPS":"Calculated new price per share","shouldContinue":"If false, update should be rejected and vault paused"}},"updateMaxPercentageChange(uint256)":{"params":{"newThreshold":"New max percentage change (1e18 = 100%)"}}},"version":1},"userdoc":{"kind":"user","methods":{"afterBalanceUpdate(uint256,uint256,uint256)":{"notice":"Called after balance update completes (for future extensibility)"},"beforeBalanceUpdate(uint256,uint256,uint256,uint256)":{"notice":"Called before balance update to validate and calculate new PPS"},"maxPercentageChange()":{"notice":"Get current max percentage change threshold"},"updateMaxPercentageChange(uint256)":{"notice":"Update the maximum price change threshold"}},"version":1}},"settings":{"remappings":["@layerzerolabs/lz-evm-protocol-v2/=lib/LayerZero-v2/packages/layerzero-v2/evm/protocol/","@layerzerolabs/oapp-evm-upgradeable/=lib/devtools/packages/oapp-evm-upgradeable/","@layerzerolabs/oapp-evm/=lib/LayerZero-v2/packages/layerzero-v2/evm/oapp/","@openzeppelin/contracts-upgradeable/=node_modules/@openzeppelin/contracts-upgradeable/","@openzeppelin/contracts/=node_modules/@openzeppelin/contracts/","@solmate/=node_modules/solmate/src/","LayerZero-v2/=lib/LayerZero-v2/","devtools/=lib/devtools/packages/toolbox-foundry/src/","ds-test/=lib/LayerZero-v2/lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/","forge-std/=node_modules/forge-std/src/","halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/","solmate/=node_modules/solmate/"],"optimizer":{"enabled":true,"runs":1000},"metadata":{"bytecodeHash":"none"},"compilationTarget":{"src/hooks/ManualBalanceUpdateHook.sol":"ManualBalanceUpdateHook"},"evmVersion":"shanghai","libraries":{},"viaIR":true},"sources":{"node_modules/@openzeppelin/contracts/utils/Panic.sol":{"keccak256":"0xf7fe324703a64fc51702311dc51562d5cb1497734f074e4f483bfb6717572d7a","urls":["bzz-raw://c6a5ff4f9fd8649b7ee20800b7fa387d3465bd77cf20c2d1068cd5c98e1ed57a","dweb:/ipfs/QmVSaVJf9FXFhdYEYeCEfjMVHrxDh5qL4CGkxdMWpQCrqG"],"license":"MIT"},"node_modules/@openzeppelin/contracts/utils/math/Math.sol":{"keccak256":"0xa00be322d7db5786750ce0ac7e2f5b633ac30a5ed5fa1ced1e74acfc19acecea","urls":["bzz-raw://6c84e822f87cbdc4082533b626667b6928715bb2b1e8e7eb96954cebb9e38c8d","dweb:/ipfs/QmZmy9dgxLTerBAQDuuHqbL6EpgRxddqgv5KmwpXYVbKz1"],"license":"MIT"},"node_modules/@openzeppelin/contracts/utils/math/SafeCast.sol":{"keccak256":"0x195533c86d0ef72bcc06456a4f66a9b941f38eb403739b00f21fd7c1abd1ae54","urls":["bzz-raw://b1d578337048cad08c1c03041cca5978eff5428aa130c781b271ad9e5566e1f8","dweb:/ipfs/QmPFKL2r9CBsMwmUqqdcFPfHZB2qcs9g1HDrPxzWSxomvy"],"license":"MIT"},"node_modules/solmate/src/auth/Auth.sol":{"keccak256":"0x6e05238d59cd40172c04c1974eb8f1f6cef4fdc4b6553ef7844a7302b885f76c","urls":["bzz-raw://a9743c21ca0470d9082e4cf00aea53786868c977d40775e6954463658ebb50ac","dweb:/ipfs/QmPFdyrLHUX1zSipTC2tcJ58EzxxPp2TTvCZx9KCgqZn2W"],"license":"AGPL-3.0-only"},"src/hooks/ManualBalanceUpdateHook.sol":{"keccak256":"0x2754a8eaba4cfccc805e22b0ce6633aa8d07dcefacd2129cb1970c4fa8f2463b","urls":["bzz-raw://bedfd3a20b1110053385967bc2141713a8b84f1f32973e5afc65a36134eb1488","dweb:/ipfs/QmdYe3khHSJHVuikRaaBqExEsEzfY41rhTMTEMqYthpx1X"],"license":"MIT"},"src/interfaces/IBalanceUpdateHook.sol":{"keccak256":"0x86171480b2d7111d180f940e866f2b1ebfccbeb07bae09329d121d9c4815d52e","urls":["bzz-raw://7e32aaf83d171193f5edf92f8e4c2c50de7b996e0b54dbdd909bedaea7761d4e","dweb:/ipfs/QmaKy5DQJCd34avuCBQtJhx4Ez955dHC3Nr6PukqwXG7dG"],"license":"MIT"},"src/libraries/Errors.sol":{"keccak256":"0xae33ca9825182ac051757cb5a13c2ae47c0e24020a04c74989c316491d2dfe89","urls":["bzz-raw://e1a964fc49f09f36861c0061d27aabf0489e2fd4a9282a3871d0b338a0b38731","dweb:/ipfs/QmaKRqJBicUmZd5EyX46Bct75HJePYRVZ6eobmP9smSMkm"],"license":"MIT"}},"version":1},"storageLayout":{"storage":[{"astId":46963,"contract":"src/hooks/ManualBalanceUpdateHook.sol:ManualBalanceUpdateHook","label":"owner","offset":0,"slot":"0","type":"t_address"},{"astId":46966,"contract":"src/hooks/ManualBalanceUpdateHook.sol:ManualBalanceUpdateHook","label":"authority","offset":0,"slot":"1","type":"t_contract(Authority)47117"},{"astId":51552,"contract":"src/hooks/ManualBalanceUpdateHook.sol:ManualBalanceUpdateHook","label":"maxPercentageChange","offset":0,"slot":"2","type":"t_uint256"}],"types":{"t_address":{"encoding":"inplace","label":"address","numberOfBytes":"20"},"t_contract(Authority)47117":{"encoding":"inplace","label":"contract Authority","numberOfBytes":"20"},"t_uint256":{"encoding":"inplace","label":"uint256","numberOfBytes":"32"}}},"ast":{"absolutePath":"src/hooks/ManualBalanceUpdateHook.sol","id":51723,"exportedSymbols":{"Auth":[47104],"Authority":[47117],"Errors":[52340],"IBalanceUpdateHook":[51764],"ManualBalanceUpdateHook":[51722],"Math":[8699]},"nodeType":"SourceUnit","src":"32:2771:80","nodes":[{"id":51533,"nodeType":"PragmaDirective","src":"32:23:80","nodes":[],"literals":["solidity","0.8",".28"]},{"id":51535,"nodeType":"ImportDirective","src":"57:49:80","nodes":[],"absolutePath":"src/libraries/Errors.sol","file":"../libraries/Errors.sol","nameLocation":"-1:-1:-1","scope":51723,"sourceUnit":52341,"symbolAliases":[{"foreign":{"id":51534,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":52340,"src":"66:6:80","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":51537,"nodeType":"ImportDirective","src":"107:74:80","nodes":[],"absolutePath":"src/interfaces/IBalanceUpdateHook.sol","file":"../interfaces/IBalanceUpdateHook.sol","nameLocation":"-1:-1:-1","scope":51723,"sourceUnit":51765,"symbolAliases":[{"foreign":{"id":51536,"name":"IBalanceUpdateHook","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51764,"src":"116:18:80","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":51540,"nodeType":"ImportDirective","src":"182:57:80","nodes":[],"absolutePath":"node_modules/solmate/src/auth/Auth.sol","file":"@solmate/auth/Auth.sol","nameLocation":"-1:-1:-1","scope":51723,"sourceUnit":47118,"symbolAliases":[{"foreign":{"id":51538,"name":"Auth","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":47104,"src":"191:4:80","typeDescriptions":{}},"nameLocation":"-1:-1:-1"},{"foreign":{"id":51539,"name":"Authority","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":47117,"src":"197:9:80","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":51542,"nodeType":"ImportDirective","src":"240:67:80","nodes":[],"absolutePath":"node_modules/@openzeppelin/contracts/utils/math/Math.sol","file":"@openzeppelin/contracts/utils/math/Math.sol","nameLocation":"-1:-1:-1","scope":51723,"sourceUnit":8700,"symbolAliases":[{"foreign":{"id":51541,"name":"Math","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8699,"src":"249:4:80","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":51722,"nodeType":"ContractDefinition","src":"488:2314:80","nodes":[{"id":51550,"nodeType":"UsingForDirective","src":"555:23:80","nodes":[],"global":false,"libraryName":{"id":51548,"name":"Math","nameLocations":["561:4:80"],"nodeType":"IdentifierPath","referencedDeclaration":8699,"src":"561:4:80"},"typeName":{"id":51549,"name":"uint256","nodeType":"ElementaryTypeName","src":"570:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"id":51552,"nodeType":"VariableDeclaration","src":"584:34:80","nodes":[],"baseFunctions":[51763],"constant":false,"functionSelector":"cfa40aed","mutability":"mutable","name":"maxPercentageChange","nameLocation":"599:19:80","scope":51722,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51551,"name":"uint256","nodeType":"ElementaryTypeName","src":"584:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"public"},{"id":51555,"nodeType":"VariableDeclaration","src":"624:35:80","nodes":[],"constant":true,"mutability":"constant","name":"DENOMINATOR","nameLocation":"641:11:80","scope":51722,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51553,"name":"uint256","nodeType":"ElementaryTypeName","src":"624:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"31653138","id":51554,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"655:4:80","typeDescriptions":{"typeIdentifier":"t_rational_1000000000000000000_by_1","typeString":"int_const 1000000000000000000"},"value":"1e18"},"visibility":"internal"},{"id":51558,"nodeType":"VariableDeclaration","src":"665:48:80","nodes":[],"constant":true,"mutability":"constant","name":"MAX_PERCENTAGE_THRESHOLD","nameLocation":"682:24:80","scope":51722,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51556,"name":"uint256","nodeType":"ElementaryTypeName","src":"665:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"31653137","id":51557,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"709:4:80","typeDescriptions":{"typeIdentifier":"t_rational_100000000000000000_by_1","typeString":"int_const 100000000000000000"},"value":"1e17"},"visibility":"internal"},{"id":51564,"nodeType":"EventDefinition","src":"727:59:80","nodes":[],"anonymous":false,"eventSelector":"5b1f8430a1675242d4a0bdb976ee1c8740d114671db54660aba42fb46293e5dd","name":"MaxPercentageUpdated","nameLocation":"733:20:80","parameters":{"id":51563,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51560,"indexed":false,"mutability":"mutable","name":"oldMax","nameLocation":"762:6:80","nodeType":"VariableDeclaration","scope":51564,"src":"754:14:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51559,"name":"uint256","nodeType":"ElementaryTypeName","src":"754:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51562,"indexed":false,"mutability":"mutable","name":"newMax","nameLocation":"778:6:80","nodeType":"VariableDeclaration","scope":51564,"src":"770:14:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51561,"name":"uint256","nodeType":"ElementaryTypeName","src":"770:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"753:32:80"}},{"id":51583,"nodeType":"FunctionDefinition","src":"792:121:80","nodes":[],"body":{"id":51582,"nodeType":"Block","src":"856:57:80","nodes":[],"statements":[{"expression":{"id":51580,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":51578,"name":"maxPercentageChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51552,"src":"866:19:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"31653136","id":51579,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"888:4:80","typeDescriptions":{"typeIdentifier":"t_rational_10000000000000000_by_1","typeString":"int_const 10000000000000000"},"value":"1e16"},"src":"866:26:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":51581,"nodeType":"ExpressionStatement","src":"866:26:80"}]},"implemented":true,"kind":"constructor","modifiers":[{"arguments":[{"id":51569,"name":"_owner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51566,"src":"825:6:80","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"arguments":[{"arguments":[{"hexValue":"30","id":51573,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"851:1:80","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":51572,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"843:7:80","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":51571,"name":"address","nodeType":"ElementaryTypeName","src":"843:7:80","typeDescriptions":{}}},"id":51574,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"843:10:80","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":51570,"name":"Authority","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":47117,"src":"833:9:80","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Authority_$47117_$","typeString":"type(contract Authority)"}},"id":51575,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"833:21:80","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_Authority_$47117","typeString":"contract Authority"}}],"id":51576,"kind":"baseConstructorSpecifier","modifierName":{"id":51568,"name":"Auth","nameLocations":["820:4:80"],"nodeType":"IdentifierPath","referencedDeclaration":47104,"src":"820:4:80"},"nodeType":"ModifierInvocation","src":"820:35:80"}],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":51567,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51566,"mutability":"mutable","name":"_owner","nameLocation":"812:6:80","nodeType":"VariableDeclaration","scope":51583,"src":"804:14:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":51565,"name":"address","nodeType":"ElementaryTypeName","src":"804:7:80","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"803:16:80"},"returnParameters":{"id":51577,"nodeType":"ParameterList","parameters":[],"src":"856:0:80"},"scope":51722,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":51644,"nodeType":"FunctionDefinition","src":"958:795:80","nodes":[],"body":{"id":51643,"nodeType":"Block","src":"1176:577:80","nodes":[],"statements":[{"assignments":[51600],"declarations":[{"constant":false,"id":51600,"mutability":"mutable","name":"totalAssets","nameLocation":"1228:11:80","nodeType":"VariableDeclaration","scope":51643,"src":"1220:19:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51599,"name":"uint256","nodeType":"ElementaryTypeName","src":"1220:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":51604,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51603,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51601,"name":"idleAssets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51590,"src":"1242:10:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":51602,"name":"newAggregatedBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51592,"src":"1255:20:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1242:33:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"1220:55:80"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51607,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51605,"name":"totalSupply","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51588,"src":"1331:11:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":51606,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1346:1:80","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"1331:16:80","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":51641,"nodeType":"Block","src":"1435:312:80","statements":[{"expression":{"id":51626,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":51617,"name":"newPPS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51597,"src":"1449:6:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":51620,"name":"DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51555,"src":"1477:11:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":51621,"name":"totalSupply","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51588,"src":"1490:11:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"expression":{"id":51622,"name":"Math","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8699,"src":"1503:4:80","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Math_$8699_$","typeString":"type(library Math)"}},"id":51623,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1508:8:80","memberName":"Rounding","nodeType":"MemberAccess","referencedDeclaration":7105,"src":"1503:13:80","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_Rounding_$7105_$","typeString":"type(enum Math.Rounding)"}},"id":51624,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"1517:5:80","memberName":"Floor","nodeType":"MemberAccess","referencedDeclaration":7101,"src":"1503:19:80","typeDescriptions":{"typeIdentifier":"t_enum$_Rounding_$7105","typeString":"enum Math.Rounding"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_enum$_Rounding_$7105","typeString":"enum Math.Rounding"}],"expression":{"id":51618,"name":"totalAssets","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51600,"src":"1458:11:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":51619,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1470:6:80","memberName":"mulDiv","nodeType":"MemberAccess","referencedDeclaration":7566,"src":"1458:18:80","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_enum$_Rounding_$7105_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256,enum Math.Rounding) pure returns (uint256)"}},"id":51625,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1458:65:80","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1449:74:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":51627,"nodeType":"ExpressionStatement","src":"1449:74:80"},{"assignments":[51629],"declarations":[{"constant":false,"id":51629,"mutability":"mutable","name":"percentageChange","nameLocation":"1601:16:80","nodeType":"VariableDeclaration","scope":51641,"src":"1593:24:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51628,"name":"uint256","nodeType":"ElementaryTypeName","src":"1593:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":51634,"initialValue":{"arguments":[{"id":51631,"name":"currentPPS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51586,"src":"1647:10:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":51632,"name":"newPPS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51597,"src":"1659:6:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":51630,"name":"_calculatePercentageChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51721,"src":"1620:26:80","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":51633,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1620:46:80","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"1593:73:80"},{"expression":{"id":51639,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":51635,"name":"shouldContinue","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51595,"src":"1680:14:80","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51638,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51636,"name":"percentageChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51629,"src":"1697:16:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<=","rightExpression":{"id":51637,"name":"maxPercentageChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51552,"src":"1717:19:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1697:39:80","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"1680:56:80","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":51640,"nodeType":"ExpressionStatement","src":"1680:56:80"}]},"id":51642,"nodeType":"IfStatement","src":"1327:420:80","trueBody":{"id":51616,"nodeType":"Block","src":"1349:80:80","statements":[{"expression":{"id":51610,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":51608,"name":"newPPS","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51597,"src":"1363:6:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":51609,"name":"DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51555,"src":"1372:11:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1363:20:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":51611,"nodeType":"ExpressionStatement","src":"1363:20:80"},{"expression":{"id":51614,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":51612,"name":"shouldContinue","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51595,"src":"1397:14:80","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"74727565","id":51613,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"1414:4:80","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"src":"1397:21:80","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":51615,"nodeType":"ExpressionStatement","src":"1397:21:80"}]}}]},"baseFunctions":[51741],"documentation":{"id":51584,"nodeType":"StructuredDocumentation","src":"919:34:80","text":"@inheritdoc IBalanceUpdateHook"},"functionSelector":"1faab223","implemented":true,"kind":"function","modifiers":[],"name":"beforeBalanceUpdate","nameLocation":"967:19:80","parameters":{"id":51593,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51586,"mutability":"mutable","name":"currentPPS","nameLocation":"1004:10:80","nodeType":"VariableDeclaration","scope":51644,"src":"996:18:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51585,"name":"uint256","nodeType":"ElementaryTypeName","src":"996:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51588,"mutability":"mutable","name":"totalSupply","nameLocation":"1032:11:80","nodeType":"VariableDeclaration","scope":51644,"src":"1024:19:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51587,"name":"uint256","nodeType":"ElementaryTypeName","src":"1024:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51590,"mutability":"mutable","name":"idleAssets","nameLocation":"1061:10:80","nodeType":"VariableDeclaration","scope":51644,"src":"1053:18:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51589,"name":"uint256","nodeType":"ElementaryTypeName","src":"1053:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51592,"mutability":"mutable","name":"newAggregatedBalance","nameLocation":"1089:20:80","nodeType":"VariableDeclaration","scope":51644,"src":"1081:28:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51591,"name":"uint256","nodeType":"ElementaryTypeName","src":"1081:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"986:129:80"},"returnParameters":{"id":51598,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51595,"mutability":"mutable","name":"shouldContinue","nameLocation":"1144:14:80","nodeType":"VariableDeclaration","scope":51644,"src":"1139:19:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":51594,"name":"bool","nodeType":"ElementaryTypeName","src":"1139:4:80","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"},{"constant":false,"id":51597,"mutability":"mutable","name":"newPPS","nameLocation":"1168:6:80","nodeType":"VariableDeclaration","scope":51644,"src":"1160:14:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51596,"name":"uint256","nodeType":"ElementaryTypeName","src":"1160:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1138:37:80"},"scope":51722,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":51655,"nodeType":"FunctionDefinition","src":"1798:296:80","nodes":[],"body":{"id":51654,"nodeType":"Block","src":"1944:150:80","nodes":[],"statements":[]},"baseFunctions":[51751],"documentation":{"id":51645,"nodeType":"StructuredDocumentation","src":"1759:34:80","text":"@inheritdoc IBalanceUpdateHook"},"functionSelector":"fcbde389","implemented":true,"kind":"function","modifiers":[],"name":"afterBalanceUpdate","nameLocation":"1807:18:80","parameters":{"id":51652,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51647,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":51655,"src":"1835:7:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51646,"name":"uint256","nodeType":"ElementaryTypeName","src":"1835:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51649,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":51655,"src":"1869:7:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51648,"name":"uint256","nodeType":"ElementaryTypeName","src":"1869:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51651,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":51655,"src":"1903:7:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51650,"name":"uint256","nodeType":"ElementaryTypeName","src":"1903:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1825:104:80"},"returnParameters":{"id":51653,"nodeType":"ParameterList","parameters":[],"src":"1944:0:80"},"scope":51722,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":51682,"nodeType":"FunctionDefinition","src":"2139:289:80","nodes":[],"body":{"id":51681,"nodeType":"Block","src":"2218:210:80","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51666,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51664,"name":"newThreshold","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51658,"src":"2236:12:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":51665,"name":"MAX_PERCENTAGE_THRESHOLD","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51558,"src":"2251:24:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2236:39:80","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":51667,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":52340,"src":"2277:6:80","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$52340_$","typeString":"type(library Errors)"}},"id":51668,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2284:20:80","memberName":"InvalidMaxPercentage","nodeType":"MemberAccess","referencedDeclaration":52321,"src":"2277:27:80","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":51669,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2277:29:80","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_error","typeString":"error"}],"id":51663,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18,-18],"referencedDeclaration":-18,"src":"2228:7:80","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_error_$returns$__$","typeString":"function (bool,error) pure"}},"id":51670,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2228:79:80","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51671,"nodeType":"ExpressionStatement","src":"2228:79:80"},{"eventCall":{"arguments":[{"id":51673,"name":"maxPercentageChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51552,"src":"2343:19:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":51674,"name":"newThreshold","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51658,"src":"2364:12:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":51672,"name":"MaxPercentageUpdated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51564,"src":"2322:20:80","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (uint256,uint256)"}},"id":51675,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2322:55:80","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":51676,"nodeType":"EmitStatement","src":"2317:60:80"},{"expression":{"id":51679,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":51677,"name":"maxPercentageChange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51552,"src":"2387:19:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":51678,"name":"newThreshold","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51658,"src":"2409:12:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2387:34:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":51680,"nodeType":"ExpressionStatement","src":"2387:34:80"}]},"baseFunctions":[51757],"documentation":{"id":51656,"nodeType":"StructuredDocumentation","src":"2100:34:80","text":"@inheritdoc IBalanceUpdateHook"},"functionSelector":"95c5eaf5","implemented":true,"kind":"function","modifiers":[{"id":51661,"kind":"modifierInvocation","modifierName":{"id":51660,"name":"requiresAuth","nameLocations":["2205:12:80"],"nodeType":"IdentifierPath","referencedDeclaration":47009,"src":"2205:12:80"},"nodeType":"ModifierInvocation","src":"2205:12:80"}],"name":"updateMaxPercentageChange","nameLocation":"2148:25:80","parameters":{"id":51659,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51658,"mutability":"mutable","name":"newThreshold","nameLocation":"2182:12:80","nodeType":"VariableDeclaration","scope":51682,"src":"2174:20:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51657,"name":"uint256","nodeType":"ElementaryTypeName","src":"2174:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2173:22:80"},"returnParameters":{"id":51662,"nodeType":"ParameterList","parameters":[],"src":"2218:0:80"},"scope":51722,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":51721,"nodeType":"FunctionDefinition","src":"2494:306:80","nodes":[],"body":{"id":51720,"nodeType":"Block","src":"2597:203:80","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51694,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51692,"name":"oldPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51685,"src":"2611:8:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":51693,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2623:1:80","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"2611:13:80","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":51697,"nodeType":"IfStatement","src":"2607:27:80","trueBody":{"expression":{"hexValue":"30","id":51695,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2633:1:80","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":51691,"id":51696,"nodeType":"Return","src":"2626:8:80"}},{"assignments":[51699],"declarations":[{"constant":false,"id":51699,"mutability":"mutable","name":"diff","nameLocation":"2652:4:80","nodeType":"VariableDeclaration","scope":51720,"src":"2644:12:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51698,"name":"uint256","nodeType":"ElementaryTypeName","src":"2644:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":51710,"initialValue":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51702,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51700,"name":"newPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51687,"src":"2659:8:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":51701,"name":"oldPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51685,"src":"2670:8:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2659:19:80","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51708,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51706,"name":"oldPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51685,"src":"2703:8:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":51707,"name":"newPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51687,"src":"2714:8:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2703:19:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":51709,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"2659:63:80","trueExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51705,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51703,"name":"newPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51687,"src":"2681:8:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":51704,"name":"oldPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51685,"src":"2692:8:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2681:19:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2644:78:80"},{"expression":{"arguments":[{"id":51713,"name":"DENOMINATOR","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51555,"src":"2751:11:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":51714,"name":"oldPrice","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51685,"src":"2764:8:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"expression":{"id":51715,"name":"Math","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":8699,"src":"2774:4:80","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Math_$8699_$","typeString":"type(library Math)"}},"id":51716,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2779:8:80","memberName":"Rounding","nodeType":"MemberAccess","referencedDeclaration":7105,"src":"2774:13:80","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_Rounding_$7105_$","typeString":"type(enum Math.Rounding)"}},"id":51717,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"2788:4:80","memberName":"Ceil","nodeType":"MemberAccess","referencedDeclaration":7102,"src":"2774:18:80","typeDescriptions":{"typeIdentifier":"t_enum$_Rounding_$7105","typeString":"enum Math.Rounding"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_enum$_Rounding_$7105","typeString":"enum Math.Rounding"}],"expression":{"id":51711,"name":"diff","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51699,"src":"2739:4:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":51712,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2744:6:80","memberName":"mulDiv","nodeType":"MemberAccess","referencedDeclaration":7566,"src":"2739:11:80","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_enum$_Rounding_$7105_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256,uint256,enum Math.Rounding) pure returns (uint256)"}},"id":51718,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2739:54:80","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":51691,"id":51719,"nodeType":"Return","src":"2732:61:80"}]},"documentation":{"id":51683,"nodeType":"StructuredDocumentation","src":"2434:55:80","text":"@dev Calculate percentage change between two prices"},"implemented":true,"kind":"function","modifiers":[],"name":"_calculatePercentageChange","nameLocation":"2503:26:80","parameters":{"id":51688,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51685,"mutability":"mutable","name":"oldPrice","nameLocation":"2538:8:80","nodeType":"VariableDeclaration","scope":51721,"src":"2530:16:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51684,"name":"uint256","nodeType":"ElementaryTypeName","src":"2530:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":51687,"mutability":"mutable","name":"newPrice","nameLocation":"2556:8:80","nodeType":"VariableDeclaration","scope":51721,"src":"2548:16:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51686,"name":"uint256","nodeType":"ElementaryTypeName","src":"2548:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2529:36:80"},"returnParameters":{"id":51691,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51690,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":51721,"src":"2588:7:80","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51689,"name":"uint256","nodeType":"ElementaryTypeName","src":"2588:7:80","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2587:9:80"},"scope":51722,"stateMutability":"pure","virtual":false,"visibility":"private"}],"abstract":false,"baseContracts":[{"baseName":{"id":51544,"name":"IBalanceUpdateHook","nameLocations":["524:18:80"],"nodeType":"IdentifierPath","referencedDeclaration":51764,"src":"524:18:80"},"id":51545,"nodeType":"InheritanceSpecifier","src":"524:18:80"},{"baseName":{"id":51546,"name":"Auth","nameLocations":["544:4:80"],"nodeType":"IdentifierPath","referencedDeclaration":47104,"src":"544:4:80"},"id":51547,"nodeType":"InheritanceSpecifier","src":"544:4:80"}],"canonicalName":"ManualBalanceUpdateHook","contractDependencies":[],"contractKind":"contract","documentation":{"id":51543,"nodeType":"StructuredDocumentation","src":"309:179:80","text":"@title ManualBalanceUpdateHook\n @notice Hook that validates balance updates based on price change thresholds\n @dev Pure calculation helper - does not modify vault state"},"fullyImplemented":true,"linearizedBaseContracts":[51722,47104,51764],"name":"ManualBalanceUpdateHook","nameLocation":"497:23:80","scope":51723,"usedErrors":[52321],"usedEvents":[46954,46961,51564]}],"license":"MIT"},"id":80}